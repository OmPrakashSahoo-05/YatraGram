{"version":3,"sources":["components/CredentialsForm/CredentialsForm.module.css","components/Story/Story.module.css","components/ProfileHeader/ProfileHeader.module.css","components/NewStory/NewStory.module.css","components/ErrorBox/ErrorBox.module.css","components/Navbar/Navbar.module.css","pages/Feed/Feed.module.css","pages/LogIn/LogIn.module.css","pages/Profile/Profile.module.css","pages/SignUp/SignUp.module.css","components/CredentialsForm/CredentialsForm.tsx","components/ErrorBox/ErrorBox.tsx","components/Story/Story.tsx","components/NewStory/NewStory.tsx","requests/stories.ts","components/Navbar/Navbar.tsx","requests/auth.ts","pages/Feed/Feed.tsx","pages/LogIn/LogIn.tsx","components/ProfileHeader/ProfileHeader.tsx","pages/Profile/Profile.tsx","requests/profile.ts","pages/SignUp/SignUp.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","CredentialsForm","props","email","setEmail","useState","password","setPassword","word","type","_jsxs","children","_jsx","className","styles","title","error","onSubmit","event","preventDefault","formGroup","htmlFor","name","value","onChange","e","target","concat","btn","separator","action","method","ErrorBox","container","Story","hideImage","author","src","story","id","avatar","alt","mainContent","href","link","authorName","onDelete","deletion","onClick","NewStory","setTitle","setLink","onCreate","required","async","fetchStories","authorId","axios","get","params","data","Navbar","history","useHistory","navbar","currentUser","Fragment","Link","to","post","logOut","onLogOut","push","Feed","storiesLoaded","setStoriesLoaded","stories","setStories","setError","useEffect","then","catch","err","console","log","map","LogIn","credentials","user","logIn","onLogIn","ProfileHeader","username","setUsername","setAvatar","avatarCacheId","onUpdate","files","Profile","setAvatarCacheId","Date","now","refreshStories","deleteStoryAndRefresh","storyId","delete","deleteStory","formData","FormData","set","headers","updateProfile","onProfileChange","createStory","SignUp","signUp","onSignUp","App","setCurrentUser","userCookie","cookie","document","JSON","parse","getCurrentUserFromCookie","Router","Switch","Route","exact","path","Redirect","reportWebVitals","onPerfEntry","Function","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.771243d4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"CredentialsForm_title__3CaBy\",\"error\":\"CredentialsForm_error__23Sg-\",\"formGroup\":\"CredentialsForm_formGroup__1b15o\",\"separator\":\"CredentialsForm_separator__3U3bw\",\"btn\":\"CredentialsForm_btn__B7JTI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Story_container___1d3D\",\"author\":\"Story_author__Txx9d\",\"mainContent\":\"Story_mainContent__3916l\",\"title\":\"Story_title__PQTdj\",\"authorName\":\"Story_authorName__2aUZt\",\"deletion\":\"Story_deletion__3N1GX\",\"avatar\":\"Story_avatar__svjSU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ProfileHeader_container__3RiEt\",\"avatar\":\"ProfileHeader_avatar__HOKq-\",\"author\":\"ProfileHeader_author__NnOB4\",\"formGroup\":\"ProfileHeader_formGroup__2K66Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formGroup\":\"NewStory_formGroup__225lD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ErrorBox_container__N9119\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__37b-J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Feed_container__2VHIq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LogIn_container__1OpZG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Profile_container__2geIX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SignUp_container__Z2mlO\"};","import { useState } from \"react\";\nimport { ICredentials } from \"../../interfaces\";\n\nimport styles from './CredentialsForm.module.css';\n\ninterface CredentialsFormProps {\n  type: 'signup'|'login';\n  error: boolean;\n  onSubmit: (credentials: ICredentials) => void;\n}\n\nexport function CredentialsForm(props: CredentialsFormProps) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const word = props.type === 'signup' ? 'Sign up' : 'Log in';\n\n  function onSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    // Clear form\n    setEmail('');\n    setPassword('');\n\n    props.onSubmit({ email, password });\n  }\n\n  return (\n    <div>\n      <h1 className={styles.title}>{word}</h1>\n      {\n        props.error && (\n          <div className={styles.error}>\n            {props.type === 'login' ? 'Authentication failed.' : 'Registration failed.'}\n          </div>\n        )\n      }\n      <form onSubmit={onSubmit}>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"email\">Email</label>\n          <input type=\"email\" name=\"email\" value={email} onChange={e => setEmail(e.target.value)} />\n        </div>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"password\">Password</label>\n          <input type=\"password\" name=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\n        </div>\n        <div>\n          <input type=\"submit\" value={word} className={`${styles.btn} btn btnPrimary`} />\n        </div>\n      </form>\n      <div className={styles.separator}>\n      </div>\n      <div>\n        <form action=\"/api/auth/google\" method=\"get\">\n          <input type=\"submit\" value={`${word} with Google`} className={`${styles.btn} btn`} />\n        </form>\n      </div>\n    </div>\n  )\n}","import styles from './ErrorBox.module.css';\n\nexport function ErrorBox() {\n  return (\n    <div className={`${styles.container} box`}>\n      An error has occurred. Please try refreshing the page.\n    </div>\n  )\n}","import { IStory } from '../../interfaces';\nimport styles from './Story.module.css';\n\ninterface StoryProps {\n  story: IStory;\n  hideImage?: boolean;\n  onDelete?: () => void;\n}\n\nexport function Story(props: StoryProps) {\n  return (\n    <div className={`${styles.container} box`}>\n      {\n        !props.hideImage && (\n          <div className={styles.author}>\n            <img src={`api/profile/avatar?userId=${props.story.author.id}`} className={styles.avatar} alt=\"avatar\" />\n          </div>\n        )\n      }\n\n      <div className={styles.mainContent}>\n        <div className={styles.title}>\n          {props.story.title}\n        </div>\n        <div>\n          <a href={props.story.link}>{props.story.link}</a>\n          <span className={styles.authorName}> - {props.story.author.name}</span>\n        </div>\n      </div>\n      {\n        props.onDelete && (\n          <div className={styles.deletion}>\n            <button onClick={props.onDelete} className=\"btn btnSmall\">X</button>\n          </div>\n        )\n      }\n    </div>\n  )\n}","import React, { useState } from \"react\";\nimport { INewStory } from \"../../interfaces\";\n\nimport styles from './NewStory.module.css';\n\ninterface NewStoryProps {\n  onCreate: (story: INewStory) => void;\n}\n\nexport function NewStory(props: NewStoryProps) {\n  const [title, setTitle] = useState('');\n  const [link, setLink] = useState('');\n\n  function onSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    // Clear form\n    setTitle('');\n    setLink('');\n    \n    props.onCreate({ title, link });\n  }\n\n  return (\n    <div>\n      <h1>Add a story</h1>\n      <form onSubmit={onSubmit}>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"title\">Title:</label>\n          <input type=\"text\" name=\"title\" value={title} onChange={e => setTitle(e.target.value)} required />\n        </div>\n        <div className={styles.formGroup}>\n          <label htmlFor=\"link\">Link:</label>\n          <input type=\"url\" name=\"link\" value={link} onChange={e => setLink(e.target.value)} required />\n        </div>\n        <div>\n          <button type=\"submit\" className=\"btn\">Submit</button>\n        </div>\n      </form>\n    </div>\n  )\n}","import axios from 'axios';\nimport { INewStory, IStory } from \"../interfaces\";\n\nexport async function fetchStories(authorId?: number): Promise<IStory[]> {\n  const response = await axios.get<IStory[]>('/api/stories', {\n    params: { authorId }\n  });\n  return response.data;\n}\n\nexport async function createStory(story: INewStory): Promise<void> {\n  await axios.post('/api/stories', story);\n}\n\nexport async function deleteStory(storyId: number): Promise<void> {\n  await axios.delete(`/api/stories/${storyId}`);\n}","import { Fragment } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { IUser } from '../../interfaces';\nimport { logOut } from '../../requests';\nimport styles from './Navbar.module.css';\n\ninterface NavbarProps {\n  currentUser: IUser|null;\n  onLogOut: () => void;\n}\n\nexport function Navbar(props: NavbarProps) {\n  const history = useHistory();\n\n  async function logOutAndRedirect() {\n    await logOut();\n    props.onLogOut();\n    history.push('/');\n  }\n\n  return (\n    <div className={styles.navbar}>\n      <div></div>\n      {\n        props.currentUser ?\n        (\n          <Fragment>\n            <Link to=\"/\" className=\"btn btnPrimary\">Feed</Link>\n            <Link to=\"/profile\" className=\"btn btnPrimary\">Profile</Link>\n            <button onClick={logOutAndRedirect} className=\"btn\">Log out</button>\n          </Fragment>\n        ) : (\n          <Fragment>\n            <Link to=\"/login\" className=\"btn btnPrimary\">Log in</Link>\n            <Link to=\"/signup\" className=\"btn btnPrimary\">Sign up</Link>\n          </Fragment>\n        )\n      }\n    </div>\n  );\n}","import axios from 'axios';\nimport { ICredentials, IUser } from '../interfaces';\n\nexport async function logIn(credentials: ICredentials): Promise<IUser> {\n  const  response = await axios.post<IUser>('/api/auth/login', credentials);\n  return response.data;\n}\n\nexport async function logOut(): Promise<void> {\n  await axios.post('/api/auth/logout');\n}\n\nexport async function signUp(credentials: ICredentials): Promise<IUser> {\n  const response = await axios.post<IUser>('/api/auth/signup', credentials);\n  return response.data;\n}\n","import React, { useEffect, useState } from \"react\";\nimport { ErrorBox, Story } from \"../../components\";\nimport { IStory } from \"../../interfaces\";\nimport { fetchStories } from \"../../requests\";\nimport styles from './Feed.module.css';\n\nexport function Feed() {\n  const [storiesLoaded, setStoriesLoaded] = useState(false);\n  const [stories, setStories] = useState<IStory[]>([]);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n    if (!storiesLoaded) {\n      fetchStories()\n        .then(stories => {\n          setStories(stories);\n          setStoriesLoaded(true);\n        })\n        .catch(err => {\n          console.log(err);\n          setError(true);\n        });\n    }\n  })\n\n  return (\n    <div className={styles.container}>\n      {\n        error && <ErrorBox />\n      }\n      {stories.map(story => <Story story={story} key={story.id} />)}\n    </div>\n  )\n}","import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { CredentialsForm } from \"../../components\";\nimport { ICredentials, IUser } from \"../../interfaces\";\nimport { logIn } from \"../../requests\";\n\nimport styles from './LogIn.module.css';\n\ninterface LogInProps {\n  onLogIn: (user: IUser) => void;\n}\n\nexport function LogIn(props: LogInProps) {\n  const [error, setError] = useState(false);\n\n  const history = useHistory();\n\n  async function logInAndRedirect(credentials: ICredentials) {\n    setError(false);\n    try {\n      const user = await logIn(credentials);\n      props.onLogIn(user);\n      history.push('/');\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  return (\n    <div className={`${styles.container} box`}>\n      <CredentialsForm error={error} type=\"login\" onSubmit={logInAndRedirect} />\n    </div>\n  );\n}","import { useEffect, useState } from 'react';\nimport styles from './ProfileHeader.module.css';\n\ninterface ProfileHeaderProps {\n  username: string;\n  avatarCacheId: number;\n  onUpdate: (username: string, avatar: File|null) => void;\n}\n\nexport function ProfileHeader(props: ProfileHeaderProps) {\n  const [username, setUsername] = useState(props.username);\n  const [avatar, setAvatar] = useState<File|null>(null);\n\n  function onSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    props.onUpdate(username, avatar);\n  }\n\n  useEffect(() => {\n    setUsername(props.username);\n  }, [props.username])\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.author}>\n        <img src={`/api/profile/avatar?${props.avatarCacheId}`} className={styles.avatar} alt=\"avatar\" />\n      </div>\n      <div>\n        <form onSubmit={onSubmit}>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"name\">Name: </label>\n            <input type=\"text\" name=\"name\" value={username} onChange={e => setUsername(e.target.value)} />\n          </div>\n          <div className={styles.formGroup}>\n            <label htmlFor=\"avatar\">Avatar: </label>\n            <input type=\"file\" name=\"avatar\" onChange={e => setAvatar(e.target.files ? e.target.files[0] : null)} />\n          </div>\n          <div>\n            <input type=\"submit\" value=\"Update profile\" className=\"btn btnSmall btnPrimary\" />\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}","import React, { useEffect, useState } from \"react\";\nimport { ErrorBox, NewStory, Story } from \"../../components\";\nimport { ProfileHeader } from \"../../components/ProfileHeader\";\nimport { INewStory, IStory, IUser } from \"../../interfaces\";\nimport { createStory, deleteStory, fetchStories, updateProfile } from \"../../requests\";\n\nimport styles from \"./Profile.module.css\";\n\ninterface ProfileProps {\n  currentUser: IUser;\n  onProfileChange: (user: IUser) => void;\n}\n\nexport function Profile(props: ProfileProps) {\n  const [storiesLoaded, setStoriesLoaded] = useState(false);\n  const [stories, setStories] = useState<IStory[]>([]);\n  const [error, setError] = useState(false);\n  const [avatarCacheId, setAvatarCacheId] = useState(Date.now());\n\n  function refreshStories() {\n    fetchStories(props.currentUser.id)\n      .then(stories => {\n        setStories(stories);\n        setStoriesLoaded(true);\n      })\n      .catch(err => {\n        console.log(err);\n        setError(true);\n      });\n  }\n\n  useEffect(() => {\n    if (!storiesLoaded) {\n      refreshStories();\n    }\n  })\n\n  async function createStoryAndRefresh(story: INewStory) {\n    try {\n      await createStory(story);\n      await refreshStories();\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n\n  async function deleteStoryAndRefresh(story: IStory) {\n    try {\n      await deleteStory(story.id);\n      await refreshStories();\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  async function updateProfileAndRedirect(name: string, avatar: File|null) {\n    try {\n      await updateProfile(name, avatar);\n      setAvatarCacheId(Date.now());\n      props.onProfileChange({\n        ...props.currentUser,\n        name,\n      });\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      {\n        error && <ErrorBox />\n      }\n      <ProfileHeader onUpdate={updateProfileAndRedirect} username={props.currentUser.name} avatarCacheId={avatarCacheId} />\n      <div>\n        <h1>Your stories</h1>\n        {stories.map(story => <Story hideImage story={story} key={story.id} onDelete={() => deleteStoryAndRefresh(story)} />)}\n      </div>\n      <NewStory onCreate={createStoryAndRefresh}/>\n    </div>\n  );\n}","import axios from \"axios\";\n\nexport async function updateProfile(username: string, avatar: File|null): Promise<void> {\n  const formData = new FormData();\n  formData.set('name', username);\n  if(avatar) {\n    formData.set('avatar', avatar);\n  }\n\n  await axios.post('/api/profile', formData, {\n    headers : {\n      'content-type': 'multipart/form-data'\n    }\n  });\n}","import { useState } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { CredentialsForm } from \"../../components\";\nimport { ICredentials, IUser } from \"../../interfaces\";\nimport { signUp } from \"../../requests\";\n\nimport styles from './SignUp.module.css';\n\ninterface SignUpProps {\n  onSignUp: (user: IUser) => void;\n}\n\nexport function SignUp(props: SignUpProps) {\n  const [error, setError] = useState(false);\n\n  const history = useHistory();\n\n  async function signUpAndRedirect(credentials: ICredentials) {\n    try {\n      const user = await signUp(credentials);\n      props.onSignUp(user);\n      history.push('/');\n    } catch (error) {\n      console.log(error);\n      setError(true);\n    }\n  }\n\n  return (\n    <div className={`${styles.container} box`}>\n      <CredentialsForm error={error} type=\"signup\" onSubmit={signUpAndRedirect} />\n    </div>\n  );\n}","import React, { Fragment, useState } from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\nimport { Navbar } from './components';\nimport { Feed, LogIn, Profile, SignUp } from './pages';\nimport { IUser } from './interfaces';\nimport * as cookie from 'cookie';\n\nfunction getCurrentUserFromCookie(): IUser | null {\n  const userCookie = cookie.parse(document.cookie).user as string|undefined;\n  if(!userCookie) {\n    return null;\n  }\n  try {\n    return JSON.parse(userCookie);\n  } catch (error: any) {\n    return null;\n  }\n}\n\nexport default function App() {\n  const [currentUser, setCurrentUser] = useState(getCurrentUserFromCookie());\n\n  return (\n    <Router>\n      <div>\n        <Switch>\n          <Route exact path=\"/login\">\n            <LogIn onLogIn={setCurrentUser} />\n          </Route>\n          <Route exact path=\"/profile\">\n            {currentUser ?\n              (\n                <Fragment>\n                  <Navbar currentUser={currentUser} onLogOut={() => setCurrentUser(null)} />\n                  <Profile currentUser={currentUser} onProfileChange={setCurrentUser} />\n                </Fragment>\n              ) :\n              <Redirect to=\"/login\" />\n            }\n          </Route>\n          <Route exact path=\"/signup\">\n            <SignUp onSignUp={setCurrentUser} />\n          </Route>\n          <Route exact path=\"/\">\n            <Navbar currentUser={currentUser} onLogOut={() => setCurrentUser(null)}  />\n            <Feed />\n          </Route>\n          <Route path=\"*\">\n            <Redirect to=\"/\" />\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}